[
["data-quality-cleaning.html", "Chapter 3 Data quality &amp; cleaning 3.1 Missing values 3.2 Excluding generic elements", " Chapter 3 Data quality &amp; cleaning 3.1 Missing values Only four variables have more than 30% missing values. Most of them are below 10% # Are there missing values? missing_values &lt;- data %&gt;% gather(key = &quot;key&quot;, value = &quot;val&quot;) %&gt;% mutate(is.missing = is.na(val)) %&gt;% group_by(key, is.missing) %&gt;% summarise(num.missing = n()/nrow(data) *100) %&gt;% filter(is.missing==T) %&gt;% select(-is.missing) %&gt;% arrange(desc(num.missing)) ggplot(missing_values, aes(x=reorder(key, -num.missing), y=num.missing, fill=key)) + geom_bar(stat=&quot;identity&quot;) + theme(axis.text.x = element_text(angle=60, hjust=1)) + labs(y = &quot;Percentage&quot;, x=&quot;Variable&quot;) + rm(missing_values) 3.1.1 Missing values in “value” year over year If we have a look at the “value” variable, we can notice that the years 2008, 2009, 2010 and 2014 only contain missing values ## Excluding plants and microorganisms We classified 98.93 % of data by kingdoms using the class, taxa and genus columns. This way, we excluded those elements belonging to fungi, plantae, bacteria, chromista and unspecified kingdoms. Bacterias: Gammaproteobacteria Chromista: Phaeophyceae Plantae: Cycadopsida, Liliopsida, Magnoliopsida, Pinopsida, Polypodiopsida Fungi: Agaricomycetes, Chytridiomycetes Animalia: Actinopterygii, Amphibia, Anthozoa, Arachnida, Ascidiacea, Asteroidea, Aves, Bivalvia, Branchiopoda, Calcarea, Cephalaspidomorphi, Cephalopoda, Cestoda, Chilopoda, Clitellata, Cubozoa, Demospongiae, Diplopoda, Echinoidea, Elasmobranchii, Enteropneusta, Eurotatoria,Gastropoda, Gymnolaemata, Hexactinellida, Hexanauplia, Holocephali, Holothuroidea, Hoplonemertea, Hydrozoa, Insecta, Leptocardii, Malacostraca, Mammalia, Maxillopoda,Merostomata, Myxini, Ophiuroidea, Ostracoda, Pilidiophora, Polychaeta, Polyplacophora, Pycnogonida, Reptilia, Sarcopterygii, Scaphopoda, Scyphozoa, Secernentea, Sipunculidea, Tentaculata, Thaliacea, Trematoda # classifying classes by kingdom classes&lt;-data %&gt;% drop_na(class) %&gt;% group_by(class) %&gt;% summarise(N=n()) animalia_kingdom &lt;- c(&quot;Actinopterygii&quot;, &quot;Amphibia&quot;, &quot;Anthozoa&quot;, &quot;Arachnida&quot;, &quot;Ascidiacea&quot;, &quot;Asteroidea&quot;, &quot;Aves&quot;, &quot;Bivalvia&quot;, &quot;Branchiopoda&quot;, &quot;Calcarea&quot;, &quot;Cephalaspidomorphi&quot;, &quot;Cephalopoda&quot;, &quot;Cestoda&quot;, &quot;Chilopoda&quot;, &quot;Clitellata&quot;, &quot;Crinoidea&quot;, &quot;Cubozoa&quot;, &quot;Demospongiae&quot;, &quot;Diplopoda&quot;, &quot;Echinoidea&quot;, &quot;Elasmobranchii&quot;, &quot;Enteropneusta&quot;, &quot;Eurotatoria&quot;, &quot;Gastropoda&quot;, &quot;Gymnolaemata&quot;, &quot;Hexactinellida&quot;,&quot;Hexanauplia&quot;, &quot;Holocephali&quot;, &quot;Holothuroidea&quot;, &quot;Hoplonemertea&quot;, &quot;Hydrozoa&quot;, &quot;Insecta&quot;, &quot;Leptocardii&quot;, &quot;Malacostraca&quot;, &quot;Mammalia&quot;, &quot;Maxillopoda&quot;, &quot;Merostomata&quot;, &quot;Myxini&quot;, &quot;Ophiuroidea&quot;, &quot;Ostracoda&quot;, &quot;Pilidiophora&quot;, &quot;Polychaeta&quot;, &quot;Polyplacophora&quot;, &quot;Pycnogonida&quot;, &quot;Reptilia&quot;, &quot;Sarcopterygii&quot;, &quot;Scaphopoda&quot;, &quot;Scyphozoa&quot;, &quot;Secernentea&quot;, &quot;Sipunculidea&quot;, &quot;Tentaculata&quot;, &quot;Thaliacea&quot;, &quot;Trematoda&quot;) fungi_kingdom &lt;-c(&quot;Agaricomycetes&quot;, &quot;Chytridiomycetes&quot;) plantae_kingdom&lt;- c(&quot;Cycadopsida&quot;, &quot;Liliopsida&quot;, &quot;Magnoliopsida&quot;, &quot;Pinopsida&quot;, &quot;Polypodiopsida&quot;, &quot;Ulvophyceae&quot;) bacterias_kingdom &lt;- c(&quot;Gammaproteobacteria&quot;) chromista_kingdom &lt;- c(&quot;Phaeophyceae&quot;) # Adding kingdom level based on class data$kingdom&lt;- ifelse(data$class %in% animalia_kingdom, &quot;Animalia&quot;, ifelse(data$class %in% fungi_kingdom, &quot;Fungi&quot;, ifelse(data$class %in% plantae_kingdom, &quot;Plantae&quot;, ifelse(data$class %in% bacterias_kingdom, &quot;Bacteria&quot;, ifelse(data$class %in% chromista_kingdom, &quot;Chromista&quot;, &quot;Other&quot; ))))) # 403,596 unclassified # Adding kingdom level based on genus data$kingdom[which(data$genus==&quot;Other live inverts&quot; | data$genus==&quot;Animals&quot; | data$genus==&quot;Corals&quot;| data$genus==&quot;Dugesia&quot;| data$genus==&quot;Nemertea&quot; | data$genus==&quot;Mollusca&quot; | data$genus==&quot;Xenoturbella&quot; | data$genus==&quot;Chondrichthyes&quot; | data$genus==&quot;Chordata&quot; | data$genus==&quot;Paracatenula&quot; | data$genus==&quot;Porifera&quot;)] &lt;- &quot;Animalia&quot; # 299,674 unclassified # Adding kingdom level based on taxa data$kingdom[which(data$taxa==&quot;crustacean&quot; | data$taxa==&quot;fish&quot; | data$taxa==&quot;coral&quot;| data$taxa==&quot;shell&quot;)] &lt;- &quot;Animalia&quot; # 58,883 unclassified data$kingdom[which(data$taxa==&quot;plant&quot;)] &lt;- &quot;Plantae&quot; # 58,855 unclassified # Let&#39;s exclude those elements from fungi, plantae, bacteria, chromista and unspecified kingdoms. data &lt;- data %&gt;% filter(kingdom==&quot;Animalia&quot;) # 5,512,706 --&gt; 5,451,832 rows rm(classes, animalia_kingdom, bacterias_kingdom, chromista_kingdom, plantae_kingdom, fungi_kingdom) 3.2 Excluding generic elements "]
]
